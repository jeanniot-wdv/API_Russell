<!DOCTYPE html>
<html lang="fr">
<head>
  <%- include('partials/head') %>
  <title>Utilisateurs</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body>
  <%- include('partials/navbar') %>

  <main>
    <section>
      <h1><i class="fas fa-users"></i> Gestion des Utilisateurs</h1>
      <p>Ajoutez de nouveaux membres à votre équipe ou consultez les profils existants.</p>

      <form id="new-user-form" action="/users" method="POST">
        <h2><i class="fas fa-user-plus"></i> Créer un nouvel utilisateur</h2>

        <label for="name">Nom :</label>
        <input type="text" name="name" required>

        <label for="firstname">Prénom :</label>
        <input type="text" name="firstname">

        <label for="email">Email :</label>
        <input type="email" name="email" required>

        <label for="password">Mot de passe :</label>
        <input type="password" name="password" required>

        <button type="submit" class="btn-primary"><i class="fas fa-plus-circle"></i> Créer</button>
      </form>
    </section>

    <section>
      <h2><i class="fas fa-address-book"></i> Liste des utilisateurs</h2>
      <table>
        <thead>
          <tr>
            <th>Nom</th>
            <th>Prénom</th>
            <th>Email</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <% users.forEach(user => { %>
            <tr onclick="window.location.href='/users/<%= user._id %>'">
              <td><%= user.name %></td>
              <td><%= user.firstname %></td>
              <td><%= user.email %></td>
              <td><a href="/users/<%= user._id %>" class="btn-secondary"><i class="fas fa-eye"></i> Voir</a></td>
            </tr>
          <% }) %>
        </tbody>
      </table>
    </section>
  </main>

  <%- include('partials/footer') %>
</body>
</html>
