<!DOCTYPE html>
<html lang="fr">
<head>
  <%- include('partials/head') %>
  <title> Gestion des utilisateurs</title>
</head>
<body>
  <%- include('partials/navbar') %>

  <main>
    <div class="hero">
      <h1><i class="fas fa-users"></i> Gestion des utilisateurs</h1>
      <p>Ajoutez de nouveaux membres à votre équipe ou consultez les profils existants.</p>
    </div>

    <div class="bloc-section">
      <div class="table-box">

        <h2><i class="fas fa-user-plus"></i> Créer un nouvel utilisateur</h2>
        <form id="new-user-form" class="create-form" action="/users" method="POST">

          <label for="name">Nom * :</label>
          <input type="text" name="name" required>

          <label for="firstname">Prénom :</label>
          <input type="text" name="firstname">

          <label for="email">Email * :</label>
          <input type="email" name="email" required>

          <label for="password">Mot de passe * :</label>
          <input type="password" name="password" required>

          <button type="submit" class="btn-primary"><i class="fas fa-plus-circle"></i> Créer</button>
        </form>
      </div>

      <div class="table-box">
        <h2><i class="fas fa-address-book"></i> Utilisateurs enregistrés</h2>
        <table>
          <thead>
            <tr>
              <th>Nom</th>
              <th>Prénom</th>
              <th>Email</th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            <% users.forEach(user => { %>
              <tr onclick="window.location.href='/users/<%= user._id %>'">
                <td><%= user.name %></td>
                <td><%= user.firstname %></td>
                <td><%= user.email %></td>
                <td><a href="/users/<%= user._id %>" class="btn-secondary"><i class="fas fa-eye"></i> Voir</a></td>
              </tr>
            <% }) %>
          </tbody>
        </table>
      </section>
    </div>
  </main>

  <%- include('partials/footer') %>
</body>
</html>
