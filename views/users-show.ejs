<!DOCTYPE html>
<html lang="fr">
<head>
  <%- include('partials/head') %>
  <title>Profil Utilisateur</title>
</head>
<body>
  <%- include('partials/navbar') %>

  <main>
    <h1 class="hero"><i class="fas fa-user-circle"></i> Profil de <%= user.firstname %> <%= user.name %></h1>
    <div class="bloc-section">
      <div class="info-catway">
        <h2><i class="fas fa-info-circle"></i> Informations détaillées</h2>
        <p><strong>ID :</strong> <%= user._id %></p>
        <p><strong>Email :</strong> <%= user.email %></p>
        <p><strong>Créé le :</strong> <%= user.createdAt.toLocaleDateString() %> à <%= user.createdAt.toLocaleTimeString() %></p>
        <a href="/users">
          <button class="btn-secondary"><i class="fas fa-arrow-left"></i> Retour à la liste</button>
        </a>
      </div>
      <div class="info-box">
        <h2><i class="fas fa-edit"></i> Modifier les informations</h2>
        <form id="edit-user-form" action="/users/<%= user._id %>?_method=PUT" method="POST">

          <label for="name">Nom :</label>
          <input type="text" name="name" value="<%= user.name %>" required>

          <label for="firstname">Prénom :</label>
          <input type="text" name="firstname" value="<%= user.firstname %>">

          <label for="email">Email :</label>
          <input type="email" name="email" value="<%= user.email %>" required>

          <button class="btn-secondary" type="submit"><i class="fas fa-save"></i> Modifier</button>
        </form>

        <form action="/users/<%= user._id %>?_method=DELETE" method="POST" onsubmit="return confirm('Confirmer la suppression ?');">
          <button class="btn-primary"><i class="fas fa-trash"></i> Supprimer l'utilisateur</button>
        </form>
      </div>
    </div>
  </main>
  <%- include('partials/footer') %>
</body>
</html>
